volume	section	page	text
1	Как работать с запросами к API	1	<br>Как работать с запросами к API<br>==============================<br><br><br>Swagger — это набор инструментов, которые помогают описывать API. Чтобы было проще разобраться в работе Partner API, мы разместили спецификацию и примеры в Swagger.<br><br><br>Как сделать запрос к API в Swagger<br>----------------------------------<br><br><br>1. Спецификация доступна по ссылке: <https://partner.qatl.ru/docs/booking-process/>.<br><br><br>2. Пользовательский веб-интерфейс:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/19e52be6ca294bcf2757b1e8c792a40f.png)<br> <br><br><br>3. Чтобы выбрать нужное API из раскрывающегося списка, нажмите на стрелочку в верхнем правом углу:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/89798d2f4045dccc4370dce5c4aea9f1.png)<br> <br><br><br>4. Чтобы начать выполнять запросы, авторизуйтесь с помощью ключа API (APIKey). APIKey вы получите на свою электронную почту.<br><br><br>Ключ API — это уникальный набор символов, который используется для аутентификации запросов. Аутентификация — проверка подлинности данных о пользователе.<br><br><br>5. Если вы переключаетесь между API, введите APIKey заново.<br><br><br>6. Работа с API происходит с помощью отправки GET или POST запросов.<br><br><br>7. При некорректных запросах или проблемах в работе API возвращается информация об ошибках. Список ошибок смотрите в конце статьи.<br><br><br> <br><br><br>Как авторизоваться<br>------------------<br><br><br>1. Нажмите кнопку «Authorize»:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/726aef07684f22e9aadc92ab256f590d.png)<br> <br><br><br>2. Введите полученный APIKey → нажмите кнопку «Authorize»:<br><br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/14c0f828b49a388eae79cf2083bb2b0f.png)<br> <br><br><br>3. Нажмите кнопку «Close», чтобы закрыть окно авторизации:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/7455816e9c69102e0b321d381442c0a5.png)<br> <br><br><br>4. Выполняйте запросы с помощью кодов объектов размещения для тестирования propertyId: 7291, 8155, 8156, 8613, 8614, 8615, 8616, 8617, 8618, 8619, 8726, 8745, 8746.<br><br><br> <br><br><br>Как сделать запрос к API<br>------------------------<br><br><br>Описанная ниже последовательность действий применяется для выполнения запроса любого из методов в описании API.<br><br><br>1. Выберите API:<br><br><br>* Content API — информация о средствах размещения;<br>* Search API — поиск вариантов размещений;<br>* Reservation API — работа с бронированиями;<br>* Geo API — поиска средств размещений по городу/региону/стране.<br><br><br>2. Выберите запрос, который доступен в выбранном API. Например, «Получить информацию о средствах размещения»:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/70190387f85752a49c2c73aadbdb15ef.png)<br> <br><br><br>3. Нажмите кнопку «Try it out»:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/3ac5e39a9974f0702a7753ea0528a2aa.png)<br> <br><br><br>4. Введите свои данные:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/b84c4c57009afb297311ee02a772945e.png)<br> <br><br><br>5. Нажмите кнопку «Execute»:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/287898c2de727c881050343816b28d32.png)<br> <br><br><br>**Важно!** Перед тем, как выполнить запрос, обратите внимание на описание к параметрам.<br><br><br>6. Если запрос успешно выполнен, то в ответ вы получите код 200 и детальное описание средств размещений:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/1a5449ae88b07561a4df25d59a80cb4d.png)<br> <br><br><br>7. Если произошла ошибка, то вы получите код ошибки и ее описание. Вот пара примеров:<br><br><br>Код 400 — сервер считает, что вы сделали неверный запрос. Это может произойти, если вы отправили неверные данные:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/2951a46e5aa3826ffd4bf65533514803.png)<br> <br><br><br>В этом примере было превышено допустимое число элементов, которое было введено в поле «count».<br><br><br>Код 401 — сервер считает, что произошла ошибка авторизации. Это может произойти, если вы отправили неверные данные:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/020e1ff803bb9748e0bbcaf09bcc7dab.png)<br> <br><br><br>В этом примере не был введен APIKey.<br><br><br>8. Аналогично выполняются и все остальные запросы к API.<br><br><br>9. Чтобы просмотреть в методе все входящие и исходящие параметры, их типы и описание, нажмите на кнопку «Schema»:<br><br>![](https://138018.selcdn.ru/KB_images/omnideskru/10578/314748/b15e12421d2d7c8c08c03e1f3da8b444.png)<br>  <br><br><br><br>
